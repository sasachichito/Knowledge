## 処理フロー

![Laravel](/picture/Laravel.png "Laravel")

## アプリケーションコンテナ
アプリケーションコンテナの実態はクラス。  
どのようなクラスか？  
・文字列とクロージャを紐づける。  
・文字列を指定すると、対応するクロージャを実行する。  
  
使い方としては、bindメソッド等で、クラス名やインターフェース名と、そのインスタンスを作成・返却するクロージャを紐づけておき、  
makeメソッドでクラス・インターフェース名を指定して、インスタンスを取得する。  
  
コンテナはDI(依存性注入)と関係する。  
- コンストラクタインジェクション  
コンテナのmakeメソッドで、紐づけていない文字列を指定すると、それをクラス名と捉えてコンストラクタを実行しインスタンスを取得しようとする。  
そのコンストラクタ引数がタイプヒントでクラス名やインターフェース名になっていると、その文字列でmakeした結果で置き換えてくれる。  
- メソッドインジェクション  
コンテナのcallメソッドで、メソッドを実行するとき、その引数がタイプヒントでクラス名やインターフェース名になっていると、  
その文字列でmakeした結果で置き換えてくれる。  
  
  
## ファサード  
ファサードは手軽にコンテナにバインドされているクラスの静的メソッドを実行するための仕組み。  
ファサード名は単なるaliasで、config/app.phpで実態となるクラスが定義されている。  
実態クラスはFacadeクラスを継承している。  
  
仕組みとしては以下  
```  
実態クラスに定義していない静的メソッドAをコールする  
↓  
PHPのマジックメソッド__callStatic() がコールされる（Facadeクラスに定義されている）  
http://php.net/manual/ja/language.oop5.overloading.php#object.callstatic  
↓  
Facadeクラスの__callStatic()内で、実態クラスのgetFacadeAccessor()が返却する文字列で、  
コンテナからmakeしインスタンスを取得する  
↓  
Facadeクラスの__callStatic()内で、コンテナから取得したインスタンスの静的メソッドAを実行し、
結果を返却する
```

## env

## config

## Cache

## Eloquent
【前知識】  
・ORM... オブジェクト関係マッピング。モデルと呼ばれるオブジェクトと、関係データベースのデータを変換すること。  
・モデルのデザインパターン... モデルオブジェクトが、関係データベースのデータをどのように持つか。  
・アクティブレコード... モデルのデザインパターンの一つ。  
・ORマッパー... ORMするための雛形クラスや関数を提供してくれるフレームワークやライブラリのこと。  

Eloquentとは、ORマッパーであり、モデルのデザインパターンにアクティブレコードを採用している。  








