## 前知識  
- ビルド  
jarコマンドでwarファイルを作成すること。  
【参考】https://qiita.com/Qui/items/14961678ef939673f744  
- クラスパスルート  
warファイル内の/WEB-INF/classesディレクトリ配下を指す。  
ビルド前のプロジェクトの段階では、プロジェクト名/src/main/resources配下にあるファイルが  
ビルド時にクラスパスルートに配置される設定になっていることが多い。  
  
## 環境の切り替え  
クラスパスルートにあるenv.txtを使用する。  
ut,ct,it,productのいずれかの値を記載する。使い方は2種類ある。  
- diconファイルで使用する  
`#ENV`でアクセスし、分岐処理を書く。  
- Javaコードで使用する  
`Env.getValue()`でアクセスし、分岐処理を書く。  
- SMARTデプロイの切り替え  
ENVの値によって実行モードが決定する。  
  
ビルドの段階でwarファイルに含めるenv.txtを切り替える運用方法も見られる。  
  
## SMART deploy  
コンテナにコンポーネントを登録するタイミングが異なる三つの実行モードを、切り替えることができる仕組みのこと。  
  
## DI  
やり方は3種類ある。  
- diconファイルにコンポーネント（クラス）を記載する  
基本の使い方であり、クラスをコンテナに登録、コンテナから取得できる。  
diconファイルの記載やdiconファイル自体を環境によって切り替えることで、コンテナに登録するクラスを変更できる。  
- 自動バインディングを利用する  
あるコンポーネントに対するDIを、diconファイルに記載せずに行う。  
componentタグのautoBinding属性で、そのコンポーネントにどの程度自動バインディングするかを指定する。  
自動バインディングで解決される場合でも、diconファイルに明示的に記載している場合は、そちらが優先される。  
- 外部バインディングを利用する  
HTTPリクエストのパラメーター名と同じプロパティに値が自動的にセットされる。  
これを利用するクラスはdiconファイルにその旨を記載する必要がある。 
