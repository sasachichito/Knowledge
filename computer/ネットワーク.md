## ネットワークアーキテクチャ  
ネットワークの実現方法。いくつかある。  
ネットワークとは、何かが繋がり通信しあうことで、コンピューター同士のネットワークをインターネットという。  
インターネットを実現する、とは電流や電波、光を使って010111...というデータを、意味のある形で送受信できるようになること。  
インターネットがきちんと構成されるには、データの送り方や受け取り方などのルール（プロトコル）が必要。  
  
インターネットに関連するネットワークアーキテクチャにはいくつかある。  
***OSI***  
***TCP/IP***  
***AppleTalk***  
等。  
  
OSIは、国際標準化機構（ISO）が定義した。  
OSIでネットワークを設計する際の指針として作成されたOSI参照モデルは、他のネットワークアーキテクチャでもよく引き合いに出される。  
***ちなみにOSIは使われていない。***  
今のインターネットに使われているのは ***TCP/IP***。  

## 回線交換とパケット交換  
コンピューターネットワークの通信方法には大きく2つある。  
  
- 回線交換  
コンピューターは回線交換機につながれ、回線交換機が別の回線交換機と繋がることで通信する。  
回線交換機間に回線が１本しかないと、ひとつのコネクションしかできない。  
複数のコネクションを確立したければ回線交換機間に回線を2本、3本と増やす必要がある。  
コネクションは通信が終了するまで回線を占有する。  
- パケット交換  
コンピューターはパケット交換機（ルーター）につながれ、パケット交換機が別のパケット交換機と繋がることで通信する。  
パケット交換機間には回線が１本しかないが、通信データを細かいパケットに分割し、ヘッダをつけて宛先を指定することで、同時に複数のコネクションを確立できる。

## モデル
![階層モデル](/picture/ネットワーク階層モデル.png "階層モデル")
### OSI参照モデル
通信に必要な機能（目的）を階層化したモデル。  

| 階層 | 機能（目的） | 備考 |
|:---|:---|:---|
|アプリケーション層 |ユーザーアプリケーションをネットワークを介して利用できるようにする機能 | |
|プレゼンテーション層 |データの表現方法を伝える（理解する）機能 |セッション実装だけではデータの符号化方法やメモリ配置方式などがわからない |
|セッション層 |データのやり取りを手順通りに進める機能 |トランスポート実装だけでは送受信間での状態やタイミングの同期ができない |
|トランスポート層 |意味のあるデータの一塊りを分割しても問題なく送受信できる機能 |ネットワーク実装だけでは大きなデータを分割してやり取りできない |
|ネットワーク層 |異なるネットワークのコンピュータにデータを届ける機能 |データリンク実装だけではネットワーク上の全ノードにデータを送る必要があり非効率 |
|データリンク層 |指定したコンピュータに正しくデータを送り届ける機能 |物理実装だけでは受信側が自分宛データなのか、また0,1の変換方法もわからない |
|物理層 |ビット列を物理世界を介して別のコンピュータまで伝える機能 |ケーブルなど |

### TCP/IP階層モデル
通信におけるプロトコル（実現方法）を階層化したモデル。  
暗黙的に各階層に機能（目的）もあるため、よくOSI参照モデルと対応させる。  

| 階層 | 機能（目的） | プロトコル（実現方法） | プロトコル実装 |
|:---|:---|:---|:---|
|アプリケーション層 |OSIのアプリケーション、プレゼンテーション、セッション層に対応 |省略 |HTTP, SSL, DNS等（アプリケーションで実装するインターフェースを持つ） |
|トランスポート層 |OSIのトランスポート層に対応 |省略 |TCP, UDP等（OSで実装するインターフェースを持つ） |
|インターネット層 |OSIのネットワーク層に対応 |省略 |ARP, IP, ICMP等（OSで実装するインターフェースを持つ） |
|ネットワークインターフェース層 |OSIのデータリンク層に対応 |省略 |イーサネット,無線LAN,PPP等（デバイスドライバで実装するインターフェースを持つ） |
|（ハードウェア） |OSIの物理層に対応 |省略 | |
  
TCP/IPではOSIにおけるデータリンク層や物理層の機器を意識しておらず、それらとOSを橋渡しするデバイスドライバが存在すれば良いとしている。  
様々なデータリンク毎に対応するNICがあり、そのNICにはデバイスドライバがある。  
データ送信処理ではデバイスドライバがMACアドレスやデータリンクプロトコル毎の制御情報などのヘッダをフレームにセットし、NICから送信する。  
NICは0,1を物理層の形式に従って変換する。（イーサネットなど、データリンクプロトコルの中には利用する物理層まで決めているものがある）  
