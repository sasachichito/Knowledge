# JMeter  
### スレッドプロパティ  
この設定でqpsを決定する。スレッド数、Ramp-Up期間、ループ回数の3つを指定する。  
  
##### スレッド数  
リクエストを送信するスレッドの数を指定する。  
  
##### Ramp-Up期間  
スレッドを利用する期間を指定する。例えばスレッド数10で、Ramp-Up期間20秒の場合、  
20秒かけて10スレッドを利用する。このときJMeterはスレッド起動タイミングを分散させるため2秒で1スレッド利用する。  
  
##### ループ回数  
1スレッドがリクエストを何回繰り返すか指定する。  
  
##### 例1  
スレッド数10、Ramp-Up期間20秒、ループ回数2の場合、2秒に1スレッドが立ち上がり2回リクエストしてそのスレッドは終了する。  
従って20秒で20リクエストされるためqpsは1。  
  
##### 例2  
スレッド数2、Ramp-Up期間20秒、ループ回数10の場合、（おそらく）1秒目と10秒目にスレッドが立ち上がり10回リクエストして終了する。  
設定的には例1と同じく20秒で20リクエストしているように感じるが、スレッドが少なく20秒に分散しきれず、  
さらにループによる10回リクエストがすぐに終わる可能性が高いため、リクエストは1秒目と10秒目付近に偏っているだろう。  
  
##### 例3  
スレッド数20、Ramp-Up期間20秒、ループ回数1の場合、1秒に1スレッドが立ち上がり1回リクエストしてそのスレッドは終了する。  
20秒で20リクエストされ、ループによる偏りもないため例1よりもqpsは1に近い。  
  
##### スレッドプロパティまとめ  
基本的にはループ回数は1にすべき。しかしスレッドは起動時に全て作成される（設定による）ため多すぎるとJMeterのメモリに乗り切らない可能性がある。  
また逆にリクエストの偏りを実現したい場合もあるため一概には言えない。  
  
またMaster-Slave構成の場合、qps計算式が変わってくる。  
スレッドプロパティは1スレーブ毎に適用されるので、例3の設定をマスターから実行したときスレーブが20台いると1qps×20台で20qpsになる。  
  
結局JMeterがどのくらいのリクエストを発行できたかを知るには、スタンドアロンでもMaster-SlaveでもレポートのThroughputを見れば良い。  
ここに20/secと出ていればスレーブ数に関係なくJMeter全体として1秒あたり20リクエストを発行したということになる。  
